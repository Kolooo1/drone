# Система управления дроном для AgroTechSim SimWorld

Этот проект реализует систему управления дроном для симулятора AgroTechSim SimWorld через REST API. Он предоставляет функциональность для базовых операций с дроном, включая взлет, движение, поворот и посадку, а также выполнение миссий по GPS-точкам.

## Возможности

- Взлет на заданную высоту
- Движение вперед и назад
- Поворот на заданный угол
- Переход в режим стабилизации
- Посадка
- Загрузка и выполнение миссий по GPS-точкам
- Подробное логирование полета
- Обработка ошибок и аварийная посадка

## Требования

- Python 3.7+
- Необходимые пакеты указаны в `requirements.txt`
- Доступ к API AgroTechSim SimWorld

## Установка

1. Клонируйте этот репозиторий
2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
3. Создайте файл `.env` с вашими учетными данными API:
   ```
   DRONE_API_URL=http://simworld.agrotechsim.com:8080/api
   DRONE_API_KEY=ваш_ключ_api
   ```

## Использование

1. Убедитесь, что сервер AgroTechSim SimWorld запущен и доступен
2. Запустите контроллер дрона:
   ```bash
   python drone_controller.py
   ```

Скрипт выполнит последовательность действий:
1. Подключение к симулятору AgroTechSim
2. Взлет дрона
3. Выполнение маневров (движение вперед-назад)
4. Переход в режим стабилизации
5. Разворот на 180 градусов
6. Посадку
7. Загрузку GPS-маршрута
8. Выполнение миссии по маршрутным точкам

Все действия записываются в консоль и файл `drone_flight.log`.

## API AgroTechSim SimWorld

Скрипт использует следующие API-вызовы:
- `GET /status` - проверка статуса соединения
- `POST /arm` - включение/выключение моторов
- `POST /setMode` - установка режима полета
- `POST /takeoff` - взлет на заданную высоту
- `POST /move` - перемещение к заданным координатам
- `POST /rotate` - поворот на заданный угол
- `POST /land` - посадка
- `POST /addWaypoints` - добавление точек маршрута
- `POST /startMission` - запуск выполнения миссии

## Журнал полета

Система ведет подробный журнал всех операций с дроном в файле `drone_flight.log`, включая:
- Временную метку для каждой операции
- Статус успеха/неудачи
- Время выполнения команд
- Сообщения об ошибках (если есть)

## Обработка ошибок

Система включает комплексную обработку ошибок:
- Проверка соединения с API
- Обработка HTTP-ошибок
- Аварийная посадка при возникновении критических ошибок
- Подробное логирование ошибок
